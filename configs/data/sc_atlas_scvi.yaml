# scVI-style DataModule 配置 (Fast Version)
#
# 使用 normalized counts (expm1) 代替 raw counts:
# - x: log1p(normalized) - Encoder 输入
# - counts: expm1(x) = normalized counts - NB Loss 目标
# - library_size: counts.sum() - Decoder 缩放
#
# 使用和 AE 相同的数据目录，无需额外预处理

_target_: src.data.scvi_datamodule.SCVIDataModule

# 数据存储路径 (和 AE 相同)
data_dir: /fast/data/scTFM/ae/tiledb_all/

# 传递给 SomaSCVIDataset 的 batch_size
batch_size: 512

# DataLoader 参数
num_workers: 8

# 是否锁页内存
pin_memory: True

# 是否保持 worker 进程存活
persistent_workers: True

# TileDB 读取块大小
io_chunk_size: 16384

# 每个 worker 预取的 batch 数量
prefetch_factor: 2
